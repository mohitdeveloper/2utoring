<div class="my-35 my-md-28 my-lg-84 Page--process:SignUp">
    <div class="Page__Container Page__Container--size:default">
        <div class="row">
            <div class="col-12 col-lg-8 mb-28 mb-lg-0">
                <form (ngSubmit)="submitUserDetailForm()" [formGroup]="userDetailForm" *ngIf="user != null && !user.isSetupComplete && userDetailForm != undefined">
                    <h1>Welcome {{user.firstName}}</h1>
                    <h2>Let's set up your profile, it will just take a minute</h2>
                    <div class="Form__Block">
                        <div class="form-row">
                            <div class="form-group col-sm-12 col-lg-6">
                                <label>Title *</label>
                                <select id="title" name="title" formControlName="title" class="form-control">
                                    <option [ngValue]="null">Select a title</option>
                                    <option *ngFor="let userTitle of userTitles" [ngValue]="userTitle.name">{{userTitle.name}}</option>
                                </select>
                                <div *ngIf="userDetailFormControls.title.errors && (userDetailFormControls.title.dirty || userDetailFormControls.title.touched || userDetailFormSubmitted)" class="error" role="alert">
                                    <div *ngIf="userDetailFormControls.title.errors.required">Please select your title to continue</div>
                                </div>
                            </div>
                            <!--<div class="form-group col-sm-12 col-lg-6">
                                <div class="form-group">
                                    <label>Country</label>
                                    <select id="stripeCountryId" name="stripeCountryId" formControlName="stripeCountryId" class="form-control" placeholder="Enter a promo code">-->
                                        <!--<option [ngValue]="null">Select your country</option>-->
                                        <!--<option *ngFor="let stripeCountry of stripeCountrys; let i = index" [selected]="i == 1" [ngValue]="stripeCountry.stripeCountryId">{{stripeCountry.name}}</option>

                                    </select>
                                </div>
                            </div>-->
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-6">
                                <label>First Name *</label>
                                <input type="text" id="firstName" name="firstName" formControlName="firstName" class="form-control" placeholder="Enter your first name" />
                                <div *ngIf="userDetailFormControls.firstName.errors && (userDetailFormControls.firstName.dirty || userDetailFormControls.firstName.touched || userDetailFormSubmitted)" class="error" role="alert">
                                    <div *ngIf="userDetailFormControls.firstName.errors.maxlength">First Name has a character limit of 250 inc. spaces.</div>
                                    <div *ngIf="userDetailFormControls.firstName.errors.required">Please enter your first name to continue</div>
                                </div>
                            </div>
                            <div class="form-group col-lg-6">
                                <label>Surname *</label>
                                <input type="text" id="lastName" name="lastName" formControlName="lastName" class="form-control" placeholder="Enter your surname" />
                                <div *ngIf="userDetailFormControls.lastName.errors && (userDetailFormControls.lastName.dirty || userDetailFormControls.lastName.touched || userDetailFormSubmitted)" class="error" role="alert">
                                    <div *ngIf="userDetailFormControls.lastName.errors.maxlength">Surname has a character limit of 250 inc. spaces</div>
                                    <div *ngIf="userDetailFormControls.lastName.errors.required">Please enter your first name to continue</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-6">
                                <label>Date of birth *</label>
                                <div class="form-row">
                                    <div class="col-4">
                                        <input type="number" step="1" placeholder="DD" id="dateOfBirthDay" name="dateOfBirthDay" formControlName="dateOfBirthDay" class="form-control" />
                                    </div>
                                    <div class="col-4">
                                        <input type="number" step="1" placeholder="MM" id="dateOfBirthMonth" name="dateOfBirthMonth" formControlName="dateOfBirthMonth" class="form-control" />
                                    </div>
                                    <div class="col-4">
                                        <input type="number" step="1" placeholder="YYYY" id="dateOfBirthYear" name="dateOfBirthYear" formControlName="dateOfBirthYear" class="form-control" />
                                    </div>
                                </div>
                                <div *ngIf="!checkDateValid() && (((userDetailFormControls.dateOfBirthYear.dirty || userDetailFormControls.dateOfBirthYear.touched) &&
                                         (userDetailFormControls.dateOfBirthMonth.dirty || userDetailFormControls.dateOfBirthMonth.touched) &&
                                         (userDetailFormControls.dateOfBirthDay.dirty || userDetailFormControls.dateOfBirthDay.touched))
                                         || userDetailFormSubmitted)" class="error" role="alert">
                                    <div>The Date of Birth you entered is invalid</div>
                                </div>
                            </div>
                            <div class="form-group col-lg-6">
                                <label>Email address</label>
                                <input type="text" id="email" name="email" formControlName="email" class="form-control" placeholder="Email Address" readonly />
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-6">
                                <label>Telephone No. *</label>
                                <input type="tel" id="telephoneNumber" name="telephoneNumber" formControlName="telephoneNumber" class="form-control" placeholder="Enter your telephone no." />
                                <div *ngIf="userDetailFormControls.telephoneNumber.errors && (userDetailFormControls.telephoneNumber.dirty || userDetailFormControls.telephoneNumber.touched || userDetailFormSubmitted)" class="error" role="alert">
                                    <div *ngIf="userDetailFormControls.telephoneNumber.errors.maxlength">This field should only allow a telephone no. of 12 characters (inc. spaces) to be added.</div>
                                    <div *ngIf="userDetailFormControls.telephoneNumber.errors.required">Please enter a telephone no. to continue.</div>
                                    <div *ngIf="userDetailFormControls.telephoneNumber.errors.pattern">Please enter a valid telephone no.</div>
                                </div>
                            </div>
                            <div class="form-group col-lg-6">
                                <label>Mobile No.</label>
                                <input type="tel" id="mobileNumber" name="mobileNumber" formControlName="mobileNumber" class="form-control" placeholder="Enter your mobile no." />
                                <div *ngIf="userDetailFormControls.mobileNumber.errors && (userDetailFormControls.mobileNumber.dirty || userDetailFormControls.mobileNumber.touched || userDetailFormSubmitted)" class="error" role="alert">
                                    <div *ngIf="userDetailFormControls.mobileNumber.errors.maxlength">This field should only allow a mobile no. of 12 characters (inc. spaces) to be added.</div>
                                    <div *ngIf="userDetailFormControls.mobileNumber.errors.required">Please enter a valid mobile no. to continue</div>
                                    <div *ngIf="userDetailFormControls.mobileNumber.errors.pattern">Mobile No is not valid</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-12">
                                <label class="form-check" for="marketingAccepted">
                                    <input type="checkbox" class="form-control" id="marketingAccepted" name="marketingAccepted" formControlName="marketingAccepted" />
                                    <span class="label">I would like to recieve relevant tips, tricks and offers from the 2utoring team</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-lg-12">
                                <label class="form-check" for="termsAndConditionsAccepted">
                                    <input type="checkbox" class="form-control" id="termsAndConditionsAccepted" name="termsAndConditionsAccepted" formControlName="termsAndConditionsAccepted" />
                                    <!--<span class="label">I have read and accepted our <a href="/terms-of-website-use" target="_blank">terms our conditions</a></span>-->
                                    <span class="label">I have read and accepted the <a class="termsCondition" href="/terms-of-website-use" target="_blank">terms and conditions</a>, <a class="termsCondition" href="/privacy-policy" target="_blank">privacy notice</a> and the <a href="/terms-of-use" class="termsCondition">Terms of use.</a> </span>
                                </label>
                                <div *ngIf="userDetailFormControls.termsAndConditionsAccepted.errors && (userDetailFormControls.termsAndConditionsAccepted.dirty || userDetailFormControls.termsAndConditionsAccepted.touched || userDetailFormSubmitted)" class="error" role="alert">
                                    <div>You need to accept our terms to continue</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="dateOfBirthInvalid()">
                        <div class="col-sm-12">
                            <!--<div class="error" role="alert">
        Sorry, the course you have selected is for {{ course.isUnder18 ? 'under' : 'over' }} 18's only.
        Please choose an {{ course.isUnder18 ? 'over' : 'under' }} 18 course from the <a [href]="'/course-search' + (course.isUnder18 ? '' : '?under=false')">Marketplace</a>.
    </div>-->

                            <div class="error" role="alert" *ngIf="course.isUnder18">
                                Sorry, the course you have selected is for under 18’s only. Please choose an over 18’s course from the <a href="/course-search">Course Marketplace</a>.
                            </div>
                            <div class="error" role="alert" *ngIf="!course.isUnder18">
                                Sorry, the course you have selected is for over 18’s only. Please choose an under 18’s course from the <a href="/course-search">Course Marketplace</a>.
                            </div>

                        </div>
                    </div>
                    <div class="Form_Block-Controls">
                        <a href="#" (click)="back()" class="link-grey">Go back</a>
                        <button type="submit" class="btn btn-primary btn-lg ml-auto" [disabled]="dateOfBirthInvalid()">Continue</button>
                    </div>
                </form>

                <!--<app-purchase-journey *ngIf="user != null && user.isSetupComplete" [classSessionId]="lesson != null ? lesson.classSessionId : null" [under18]="lesson != null ? lesson.isUnder16 : null" [dateOfBirth]="user.dateOfBirth" [sessionDate]="lesson != null ? lesson.sessionDate : null"></app-purchase-journey>-->
                <app-purchase-journey *ngIf="user != null && user.isSetupComplete" [courseId]="course != null ? course.courseId : null" [under18]="course != null ? course.isUnder18 : null" [dateOfBirth]="user.dateOfBirth" [sessionDate]="course != null ? course.classSessions[0].startDate: null"></app-purchase-journey>
            </div>
            <div class="col-12 col-lg-4">
                <app-lesson-card [lesson]="lesson" [course]="course" [selected]="user != null && user.isSetupComplete ? true : null"></app-lesson-card>
            </div>
        </div>
    </div>
</div>